image: "cloudflare/cloudflared:2023.5.1"
replicaCount: 2

containerPorts:
  http: 2000

annotations: {}

ingress:
  enabled: false

service:
  type: ClusterIP
  nodePorts: {}
#   http: 2000
  ports:
    http: 2000

secret:
  credentials:
    name: tunnel-credentials
  certificates:
    name: tunnel-certificates

livenessProbe:
  enabled: true
  path: /healthcheck
  port: 2000
  initialDelaySeconds: 10
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 1
  successThreshold: 1

readinessProbe:
  enabled: true
  path: /ready
  port: 2000
  initialDelaySeconds: 10
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 1
  successThreshold: 1

serviceMonitor:
  enabled: false
  extraLabels:
    release: prometheus
  interval: 30s
  scrapeTimeout: 30s

config:
  credentials-file: /etc/cloudflared/creds/credentials.json
  metrics: 0.0.0.0:2000
  no-autoupdate: true
  origincert: /etc/cloudflared/certs/cert.pem
  ingress: []
#     - hostname: tunnel.example.com
#       service: http://web-service:80
#     - hostname: hello.example.com
#       service: hello_world
#     - service: http_status:404
